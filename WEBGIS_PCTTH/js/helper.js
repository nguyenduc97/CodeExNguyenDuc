require([
    "esri/config",
    "esri/core/urlUtils",
    "esri/Map",
    "esri/views/MapView",
    "esri/Basemap",
    "esri/widgets/DistanceMeasurement2D",
    "esri/widgets/AreaMeasurement2D",
    "esri/layers/TileLayer",
    "esri/layers/WebTileLayer",
    "esri/symbols/SimpleFillSymbol",
    "esri/Color",
    "esri/symbols/SimpleLineSymbol",
    "esri/symbols/SimpleMarkerSymbol",
    "esri/symbols/TextSymbol",
    "esri/layers/MapImageLayer",
    "esri/layers/FeatureLayer",
    "esri/layers/Layer",
    "esri/layers/support/LabelClass",
    "esri/Graphic",
    "esri/layers/GraphicsLayer",
    "esri/geometry/SpatialReference",
    "esri/widgets/Expand",
    "esri/widgets/Home",
    "esri/widgets/Locate",
    "esri/widgets/LayerList",
    "esri/widgets/BasemapGallery",
    "esri/widgets/BasemapGallery/support/LocalBasemapsSource",
    "esri/widgets/Search",
    "esri/widgets/Popup",
    "esri/widgets/Fullscreen",
    "esri/widgets/Print",
    "esri/widgets/ScaleBar",
    "esri/widgets/Expand",
    "esri/PopupTemplate",
    "esri/tasks/Locator",
    "esri/tasks/support/Query",
    "esri/geometry/Extent",
    "esri/Viewpoint",
    "esri/core/watchUtils",
    "esri/geometry/geometryEngine",
    "esri/geometry/Polygon",
    "esri/geometry/Polyline",
    "esri/request",
    "dojo/query",
    "dojo/_base/array",
    "dojo/_base/lang",
    "dojo/_base/declare",
    "dojo/dom-construct",
    "dojo/dom-class",
    "dojo/dom-geometry",
    "esri/views/2d/draw/Draw",
    "esri/widgets/Editor",
    "esri/widgets/FeatureTemplates",
    "esri/tasks/QueryTask",
    "dgrid/OnDemandGrid",
    "dgrid/Grid",
    "dgrid/extensions/ColumnHider",
    "dgrid/extensions/Pagination",
    "dgrid/extensions/ColumnResizer",
    "dojo/i18n!dgrid/extensions/nls/pagination",
    "dojo/store/Memory",
    "dstore/legacy/StoreAdapter",
    "dgrid/Selection",
    "esri/geometry/support/webMercatorUtils",
    "esri/geometry/support/jsonUtils",
    "esri/geometry/Point",
    "esri/layers/CSVLayer",
    "dojox/data/CsvStore",
    "dojox/encoding/base64",
    "dojo/_base/lang",
    "dojo/on",
    "dojo/dom",
    "dojo/keys",
    "dojo/json",
    "dojo/domReady!"
    ],function(
        esriConfig,
        urlUtils,
        Map,
        MapView,
        Basemap,
        DistanceMeasurement2D,
        AreaMeasurement2D,
        TileLayer,
        WebTileLayer,
        SimpleFillSymbol,
        Color,
        SimpleLineSymbol,
        SimpleMarkerSymbol,
        TextSymbol,
        MapImageLayer,
        FeatureLayer,
        Layer,
        LabelClass,
        Graphic,
        GraphicsLayer,
        SpatialReference,
        Expand,
        Home,
        Locate,
        LayerList,
        BasemapGallery,
        LocalBasemapsSource,
        Search,
        Popup,
        Fullscreen,
        Print,
        ScaleBar,
        Expand,
        PopupTemplate,
        Locator,
        Query,
        Extent,
        Viewpoint,
        watchUtils,
        geometryEngine,
        Polygon,
        Polyline,
        esriRequest,
        query,
        array,
        lang,
        declare,
        domConstruct,
        domClass,
        domGeom,
        Draw,
        Editor,
        FeatureTemplates,
        QueryTask,
        OnDemandGrid,
        Grid,
        ColumnHider,
        Pagination,
        ColumnResizer,
        i18nPagination,
        Memory,
        StoreAdapter,
        Selection,
        webMercatorUtils,
        jsonUtils,
        Point,
        CSVLayer,
        CsvStore,
        base64,
        lang,
        on,
        dom,
        keys,
        JSON){
        var _Map, dataSpatialReference, view, _location, tocLegend, infoTable, _currentLayer;
        loadMap(Map,MapView,Search,BasemapGallery,Expand,ScaleBar,Fullscreen,Print,Home,Locate,esriRequest,query,on, dom,LayerList,MapImageLayer,GraphicsLayer,FeatureLayer,array,Basemap,Query,Polygon);
        //addinfoTable(Map, Expand, FeatureLayer, QueryTask, Query, Grid, OnDemandGrid, ColumnHider, Pagination, ColumnResizer,i18nPagination, Memory, StoreAdapter, Selection, webMercatorUtils, Graphic, GraphicsLayer, array, dom, on, domClass, declare, Extent, Point, Polygon, Polyline, SpatialReference,lang)
        //addPrint(Map, Print, Expand, dom, on); 
        //addSearchBox(Search);
        //addMeasurement(DistanceMeasurement2D, AreaMeasurement2D);
        setTimeout(function () { $('.esri-attribution__powered-by').html('<a target="_blank" href="http://diadu.vn">Phát triển bởi: DIA DU Co., Ltd</a>'); }, 3000);
        setTimeout(function () {
            // This hides the address bar:
            window.scrollTo(0, 1);
        }, 0);        
    });